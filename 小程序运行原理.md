## 小程序运行原理
小程序的视图层是靠webview作为渲染载体的，逻辑层的JavaScript是靠JavaScriptCore独立执行的，两边都是独立的，并不具备数据共享的通道，但是可以通过evaluateJavascript来实现数据的传递。用户传递的数据要先转换为字符串，在转换为js脚本，最后通过执行js脚本来实现视图层和逻辑层的数据通信。    
evaluateJavaScript的执行效率受很多因素的影响：  
同一进程内的 WebView 实际上会共享一个 JS VM  
（1） WebView 内 JS 线程正在执行渲染或其他逻辑  
（2） 多个 WebView 也会抢占 JS VM 的执行权限  
（3） JS 本身的编译执行耗时  

#### 提高性能尽量要少做的事情：
（1）频繁的去 setData：JS 线程一直在编译执行渲染，不能及时将用户操作事件传递到逻辑层，逻辑层亦无法及时将操作处理结果及时传递到视图层；
（2）每次 setData 都传递大量新数据 ：我们的数据传输实际是一次 evaluateJavascript 脚本过程，当数据量过大时会增加脚本的编译执行时间，占用 WebView JS 线程。  
（3）后台态页面进行 setData：会影响前台页面的性能

#### 注意点
（1）尽量不要使用大图  
（2）及时清理不使用的代码和资源：目前小程序打包是会将工程下所有文件都打入代码包内，不使用的代码和资源会影响到整体代码包的大小。
